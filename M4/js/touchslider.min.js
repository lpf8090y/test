!function(t){"use strict";var e="createTouch"in document||"ontouchstart"in t,i=document.createElement("div").style,s=function(){var t,e={OTransform:["-o-","otransitionend"],WebkitTransform:["-webkit-","webkitTransitionEnd"],MozTransform:["-moz-","transitionend"],msTransform:["-ms-","MSTransitionEnd"],transform:["","transitionend"]};for(t in e)if(t in i)return e[t];return!1}(),n=[["width","left","right"],["height","top","bottom"]],h=s&&s[0],r=function(t){return(t+"").replace(/^-ms-/,"ms-").replace(/-([a-z]|[0-9])/gi,function(t,e){return(e+"").toUpperCase()})},o=function(t){var e=r(h+t);return t in i&&t||e in i&&e},a=function(t,e){for(var i in e)"undefined"==typeof t[i]&&(t[i]=e[i]);return t},l=function(t){for(var e=t.children||t.childNodes,i=[],s=0;s<e.length;s++)1===e[s].nodeType&&i.push(e[s]);return i},c=function(t,e){for(var i=0,s=t.length;s>i&&e.call(t[i],i,t[i])!==!1;i++);},u=function(t){t=f.fn.eventHook(t),t.preventDefault()},d=s[1]||"",f=function(t,e){return this instanceof f?("string"==typeof t||t.nodeType||(e=t,t=e.id),t.nodeType||(t=document.getElementById(t)),this.cfg=a(e||{},this._default),this.element=t,void(this.element&&(this.container=this.element.parentNode||document.body,this.setup()))):new f(t,e)};f.fn=f.prototype={version:"1.3.1",_default:{id:"slider",begin:0,auto:!0,speed:600,timeout:5e3,direction:"left",align:"center",fixWidth:!0,mouseWheel:!1,mouseDrag:!0,before:new Function,after:new Function},css:function(t,e){if("string"==typeof e){var s=document.defaultView&&document.defaultView.getComputedStyle&&getComputedStyle(t,null)||t.currentStyle||t.style||{};return s[r(e)]}var n,h;for(n in e)h="float"==n?"cssFloat"in i?"cssFloat":"styleFloat":r(n),t.style[h]=e[n]},addListener:function(t,e,i,s){return t.addEventListener?(t.addEventListener(e,i,s),!0):t.attachEvent?(t.attachEvent("on"+e,i),!0):!1},removeListener:function(t,e,i,s){return t.addEventListener?(t.removeEventListener(e,i,s),!0):t.attachEvent?(t.detachEvent("on"+e,i),!0):!1},eventHook:function(i){var s={},n="changedTouches touches scale target view which clientX clientY fromElement offsetX offsetY pageX pageY toElement".split(" ");if(i=i||t.event,c(n,function(){s[this]=i[this]}),s.target=i.target||i.srcElement||document,3===s.target.nodeType&&(s.target=s.target.parentNode),s.preventDefault=function(){i.preventDefault&&i.preventDefault(),s.returnValue=i.returnValue=!1},s.stopPropagation=function(){i.stopPropagation&&i.stopPropagation(),s.cancelBubble=i.cancelBubble=!0},e&&s.touches.length)s.pageX=s.touches.item(0).pageX,s.pageY=s.touches.item(0).pageY;else if("undefined"==typeof i.pageX){var h=document.documentElement,r=document.body;s.pageX=i.clientX+(h&&h.scrollLeft||r&&r.scrollLeft||0)-(h&&h.clientLeft||r&&r.clientLeft||0),s.pageY=i.clientY+(h&&h.scrollTop||r&&r.scrollTop||0)-(h&&h.clientTop||r&&r.clientTop||0)}return s.origEvent=i,s},bind:function(t,e){return function(){return t.apply(e,arguments)}},setup:function(){var i=e||!this.cfg.mouseDrag,n=i?"touchstart":"mousedown",h=i?"touchmove":"mousemove",r=i?"touchend":"mouseup";if(this.slides=l(this.element),this.length=this.slides.length,this.cfg.timeout=parseInt(this.cfg.timeout),this.cfg.speed=parseInt(this.cfg.speed),this.cfg.begin=parseInt(this.cfg.begin),this.cfg.auto=!!this.cfg.auto,this.cfg.timeout=Math.max(this.cfg.timeout,this.cfg.speed),this.touching=!!e,this.css3transition=!!s,this.index=this.cfg.begin<0||this.cfg.begin>=this.length?0:this.cfg.begin,this.length<1)return!1;switch(this.comment=document.createComment("\n Powered by TouchSlider v"+this.version+",\n author: qiqiboy,\n email: imqiqiboy@gmail.com,\n blog: http://www.qiqiboy.com,\n weibo: http://weibo.com/qiqiboy\n"),this.container.insertBefore(this.comment,this.element),this.cfg.direction){case"up":case"down":this.direction=this.cfg.direction,this.vertical=1;break;case"right":this.direction="right";default:this.direction=this.direction||"left",this.vertical=0}this.addListener(this.element,n,this.bind(this._start,this),!1),this.addListener(document,h,this.bind(this._move,this),!1),this.addListener(document,r,this.bind(this._end,this),!1),this.addListener(document,"touchcancel",this.bind(this._end,this),!1),this.addListener(this.element,d,this.bind(this.transitionend,this),!1),this.addListener(t,"resize",this.bind(function(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(this.bind(this.resize,this),100)},this),!1),this.cfg.mouseWheel&&(this.addListener(this.element,"mousewheel",this.bind(this.mouseScroll,this),!1),this.addListener(this.element,"DOMMouseScroll",this.bind(this.mouseScroll,this),!1)),this.playing=this.cfg.auto,this.resize()},getSum:function(t,e,i){for(var s=0,n=e,h=r("-"+t);i>n;n++)s+=this["getOuter"+h](this.slides[n]);return s},getPos:function(t,e){var i=r("-"+t),s=this.getSum(t,e,e+1),n=this.getSum(t,0,e)+this["getOuter"+i](this.element)/2-this["get"+i](this.element)/2;switch(this.cfg.align){case"left":return-n;case"right":return this[t]-s-n;default:return(this[t]-s)/2-n}},resize:function(){clearTimeout(this.aniTimer);var t,e=this,i=n[this.vertical][0],s=r("-"+i),o=this.css(this.container,"position");return this.css(this.container,{overflow:"hidden",visibility:"hidden",listStyle:"none",position:"static"==o?"relative":o}),this[i]=this["get"+s](this.container),t={"float":this.vertical?"none":"left",display:"block"},c(this.slides,function(){e.cfg.fixWidth&&(t[i]=e[i]-e["margin"+s](this)-e["padding"+s](this)-e["border"+s](this)+"px"),e.css(this,t)}),this.total=this.getSum(i,0,this.length),t={position:"relative",overflow:"hidden"},t[h+"transition-duration"]="0ms",t[i]=this.total+"px",t[n[this.vertical][1]]=this.length?this.getPos(i,this.index)+"px":0,this.css(this.element,t),this.css(this.container,{visibility:"visible"}),this.playing&&this.play(),this},slide:function(t,e){var i,s,h=n[this.vertical][1],r=n[this.vertical][0],a=o("transition"),l=parseFloat(this.css(this.element,h))||0,c={},u=this.getSum(r,t,t+1);if(t=Math.min(Math.max(0,t),this.length-1),e="undefined"==typeof e?this.cfg.speed:parseInt(e),i=this.getPos(r,t),s=i-l,e=Math.abs(s)<u?Math.ceil(Math.abs(s)/u*e):e,a)c[a]=h+" ease "+e+"ms",c[h]=i+"px",this.css(this.element,c);else{var d=this,f=0,m=e/10,g=function(t,e,i,s){return-i*((t=t/s-1)*t*t*t-1)+e},p=function(){m>f?(f++,d.element.style[h]=Math.ceil(g(f,l,s,m))+"px",d.aniTimer=setTimeout(p,10)):(d.element.style[h]=i+"px",d.transitionend({propertyName:h}))};clearTimeout(this.aniTimer),p()}var v=this.slides[this.index];return this.index=t,this.cfg.before.call(this,t,v),this},play:function(){return clearTimeout(this.timer),this.playing=!0,this.timer=setTimeout(this.bind(function(){"left"==this.direction||"up"==this.direction?this.next():this.prev()},this),this.cfg.timeout),this},pause:function(){return clearTimeout(this.timer),this.playing=!1,this},stop:function(){return this.pause(),this.slide(0)},prev:function(t,e){clearTimeout(this.timer);var i=this.index;return t="undefined"==typeof t?t=1:t%this.length,i-=t,i=e===!1?Math.max(i,0):0>i?this.length+i:i,this.slide(i)},next:function(t,e){clearTimeout(this.timer);var i=this.index;return"undefined"==typeof t&&(t=1),i+=t,e===!1?i=Math.min(i,this.length-1):i%=this.length,this.slide(i)},_start:function(t){t=this.eventHook(t);var e=t.target.nodeName.toLowerCase();this.touching||"a"!=e&&"img"!=e||t.preventDefault(),this.removeListener(this.element,"click",u),this.startPos=[t.pageX,t.pageY],this.element.style[r(h+"transition-duration")]="0ms",this.startTime=+new Date,this._pos=parseFloat(this.css(this.element,n[this.vertical][1]))||0},_move:function(e){if(this.startPos&&(!e.scale||1===e.scale)){e=this.eventHook(e),this.stopPos=[e.pageX,e.pageY];var i,s=n[this.vertical][1],h=n[this.vertical][0],r=this.stopPos[this.vertical]-this.startPos[this.vertical];this.scrolling||"undefined"==typeof this.scrolling&&Math.abs(r)>=Math.abs(this.stopPos[1-this.vertical]-this.startPos[1-this.vertical])?(e.preventDefault(),r/=!this.index&&r>0||this.index==this.length-1&&0>r?Math.abs(r)/this[h]+1:1,this.element.style[s]=this._pos+r+"px",null!=t.getSelection&&(i=getSelection(),i.empty?i.empty():i.removeAllRanges&&i.removeAllRanges()),r&&"undefined"==typeof this.scrolling&&(this.scrolling=!0,clearTimeout(this.timer),clearTimeout(this.aniTimer))):this.scrolling=!1}},_end:function(){if(this.startPos){if(this.scrolling){var t,e,i,s=n[this.vertical][0],h=(n[this.vertical][1],this.stopPos[this.vertical]-this.startPos[this.vertical]),r=Math.abs(h),o=r/h,a=this.index,l=0;if(this.addListener(this.element,"click",u),r>20){e=parseFloat(this.css(this.element,n[this.vertical][1]));do{if(!(a>=0&&a<this.length)){a+=o;break}i=this.getPos(s,a),t=this.getSum(s,a,a+1)}while(Math.abs(i-e)>t/2&&(a-=o));l=Math.abs(a-this.index),!l&&+new Date-this.startTime<250&&(l=1)}h>0?this.prev(l,!1):this.next(l,!1),this.playing&&this.play()}delete this._pos,delete this.stopPos,delete this.startPos,delete this.scrolling,delete this.startTime}},mouseScroll:function(t){if(this.cfg.mouseWheel){t=this.eventHook(t);var e,i=this,s=t.origEvent,n=0,h=0;if("wheelDeltaX"in s)n=s.wheelDeltaX,h=s.wheelDeltaY;else if("wheelDelta"in s)h=s.wheelDelta;else{if(!("detail"in s))return;h=-s.detail}!this.vertical&&Math.abs(n)>Math.abs(h)?e=n:h&&(!s.wheelDeltaX||this.vertical&&Math.abs(n)<Math.abs(h))&&(e=h),e&&(t.preventDefault(),clearTimeout(this.mouseTimer),this.mouseTimer=setTimeout(function(){e>0?i.prev(1,!1):i.next(1,!1)},100))}},transitionend:function(t){t.propertyName==n[this.vertical][1]&&(this.cfg.after.call(this,this.index,this.slides[this.index]),this.playing&&this.play())},refresh:function(){null==this.direction?this.setup():(this.slides=l(this.element),this.length=this.slides.length,this.index=Math.max(Math.min(this.length-1,this.index),0),this.resize())},append:function(t){this.element.appendChild(t),this.refresh()},prepend:function(t){this.length?this.insertBefore(t,0):this.append(t)},insertBefore:function(t,e){this.element.insertBefore(t,this.slides[e]),this.index>=e&&this.index++,this.refresh()},remove:function(t){this.element.removeChild(this.slides[t]),this.index>=t&&this.index--,this.refresh()}},c(["Width","Height"],function(t,e){e.toLowerCase();c(["margin","padding","border"],function(i,s){f.fn[s+e]=function(e){return(parseFloat(this.css(e,s+"-"+n[t][1]+("border"==s?"-width":"")))||0)+(parseFloat(this.css(e,s+"-"+n[t][2]+("border"==s?"-width":"")))||0)}}),f.fn["get"+e]=function(t){return t["offset"+e]-this["padding"+e](t)-this["border"+e](t)},f.fn["getOuter"+e]=function(t){return t["offset"+e]+this["margin"+e](t)}}),t.TouchSlider=f}(window);